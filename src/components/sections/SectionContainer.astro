---
import Reveal from '@components/utils/Reveal.astro';

interface Props {
  id?: string;
  maxWidth?: 'max-w-3xl' | 'max-w-[720px]' | 'max-w-4xl' | 'max-w-6xl' | 'max-w-[980px]';
  padding?: string;
  useReveal?: boolean;
  nested?: boolean;
  ariaLabelledby?: string;
  class?: string;
}

const {
  id,
  maxWidth = 'max-w-[720px]',
  padding = 'py-20 md:py-28',
  useReveal = true,
  nested = false,
  ariaLabelledby,
  class: className = '',
} = Astro.props;

const ariaAttrs = ariaLabelledby ? { 'aria-labelledby': ariaLabelledby } : {};
---

{
  nested ? (
    <section id={id} class={`section-layer ${padding} px-4 ${className}`} {...ariaAttrs}>
      <div class={`${maxWidth} mx-auto`}>
        {useReveal ? (
          <Reveal>
            <slot />
          </Reveal>
        ) : (
          <slot />
        )}
      </div>
    </section>
  ) : (
    <section
      id={id}
      class={`section-layer ${maxWidth} mx-auto px-4 ${padding} ${className}`}
      {...ariaAttrs}
    >
      {useReveal ? (
        <Reveal>
          <slot />
        </Reveal>
      ) : (
        <slot />
      )}
    </section>
  )
}
