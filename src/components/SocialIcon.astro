---
interface Props {
  platform: 'github' | 'linkedin' | 'twitter' | 'rss';
  href: string;
}

interface IconData {
  label: string;
  paths: string[];
  circles?: { cx: number; cy: number; r: number }[];
}

const { platform, href } = Astro.props;

const icons: Record<Props['platform'], IconData> = {
  github: {
    label: 'GitHub',
    paths: ['M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22']
  },
  linkedin: {
    label: 'LinkedIn',
    paths: [
      'M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z',
      'M2 9h4v12H2z'
    ],
    circles: [{ cx: 4, cy: 4, r: 2 }]
  },
  twitter: {
    label: 'Twitter/X',
    paths: [
      'M4 4l11.733 16h4.267l-11.733 -16z',
      'M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772'
    ]
  },
  rss: {
    label: 'RSS Feed',
    paths: [
      'M4 11a9 9 0 0 1 9 9',
      'M4 4a16 16 0 0 1 16 16'
    ],
    circles: [{ cx: 5, cy: 19, r: 1 }]
  }
};

const icon = icons[platform];
const relAttribute = platform === 'rss' ? 'noopener noreferrer' : 'me noopener noreferrer';
const targetAttribute = platform === 'rss' ? '_blank' : '_blank';
---

<a href={href} target={targetAttribute} rel={relAttribute} aria-label={icon.label}>
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    {icon.paths.map(path => <path d={path}></path>)}
    {icon.circles && icon.circles.map(circle => (
      <circle cx={circle.cx} cy={circle.cy} r={circle.r}></circle>
    ))}
  </svg>
</a>

<style>
  a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--icon-size);
    height: var(--icon-size);
    border-radius: 50%;
    transition: all var(--transition-fast);
    color: var(--color-text-muted);
  }

  a:hover {
    color: var(--color-link);
    background-color: var(--color-bg-accent);
  }
</style>
